(this["webpackJsonpSurveyBite-Client"]=this["webpackJsonpSurveyBite-Client"]||[]).push([[0],{107:function(e,t,s){"use strict";s.r(t);var n=s(1),r=s.n(n),a=s(31),i=s.n(a),c=(s(77),s(54)),o=s(9),u=s(10),l=s(12),d=s(11),h=s(15),j=s(110),b=s(2),m=s(3),p=s(0),v=["user","component","render"],O=function(e){var t=e.user,s=e.component,n=e.render,r=Object(m.a)(e,v);return t&&n?Object(p.jsx)(h.b,Object(b.a)(Object(b.a)({},r),{},{render:n})):Object(p.jsx)(h.b,Object(b.a)(Object(b.a)({},r),{},{render:function(e){return t?Object(p.jsx)(s,Object(b.a)({},e)):Object(p.jsx)(h.a,{to:"/"})}}))},x=s(60),f=(s(86),function(e){Object(l.a)(s,e);var t=Object(d.a)(s);function s(e){var n;return Object(o.a)(this,s),(n=t.call(this,e)).handleClose=function(){return n.setState({show:!1})},n.state={show:!0},n.timeoutId=null,n}return Object(u.a)(s,[{key:"componentDidMount",value:function(){this.timeoutId=setTimeout(this.handleClose,5e3)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timeoutId)}},{key:"render",value:function(){var e=this.props,t=e.variant,s=e.heading,n=e.message,r=e.deleteAlert,a=e.id;return this.state.show||setTimeout((function(){r(a)}),300),Object(p.jsx)(x.a,{dismissible:!0,show:this.state.show,variant:t,onClose:this.handleClose,children:Object(p.jsxs)("div",{className:"container",children:[Object(p.jsx)(x.a.Heading,{children:s}),Object(p.jsx)("p",{className:"alert-body",children:n})]})})}}]),s}(r.a.Component)),g=s(72),y=s(44),S=s(14),w=Object(p.jsxs)(n.Fragment,{children:[Object(p.jsx)(S.c,{to:"/change-password",className:"nav-link",children:"Change Password"}),Object(p.jsx)(S.c,{to:"/new-survey",className:"nav-link",children:"Create Survey"}),Object(p.jsx)(S.c,{to:"/surveys",className:"nav-link",children:"Surveys"}),Object(p.jsx)(S.c,{to:"/sign-out",className:"nav-link",children:"Sign Out"})]}),C=Object(p.jsxs)(n.Fragment,{children:[Object(p.jsx)(S.c,{to:"/sign-up",className:"nav-link",children:"Sign Up"}),Object(p.jsx)(S.c,{to:"/sign-in",className:"nav-link",children:"Sign In"})]}),k=Object(p.jsx)(n.Fragment,{children:Object(p.jsx)(S.c,{exact:!0,to:"/",className:"nav-link",children:"Home"})}),q=function(e){var t=e.user;return Object(p.jsxs)(y.a,{bg:"primary",variant:"dark",expand:"md",children:[Object(p.jsx)(y.a.Brand,{children:Object(p.jsx)(S.b,{to:"/",style:{color:"#FFF",textDecoration:"none"},children:"Survey Bite"})}),Object(p.jsx)(y.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(p.jsx)(y.a.Collapse,{id:"basic-navbar-nav",children:Object(p.jsxs)(g.a,{className:"ml-auto",children:[t&&Object(p.jsxs)("span",{className:"navbar-text mr-2",children:["Hi,  ",t.email]}),k,t?w:C]})})]})},A=s(4),I="https://floating-lowlands-79433.herokuapp.com",P="http://localhost:4741",N="localhost"===window.location.hostname?P:I,E=s(19),F=s.n(E),D=function(e){return F()({url:N+"/sign-in/",method:"POST",data:{credentials:{email:e.email,password:e.password}}})},B=s(6),L=s(8),T=function(e){Object(l.a)(s,e);var t=Object(d.a)(s);function s(e){var n;return Object(o.a)(this,s),(n=t.call(this,e)).handleChange=function(e){return n.setState(Object(A.a)({},e.target.name,e.target.value))},n.onSignUp=function(e){e.preventDefault();var t,s=n.props,r=s.msgAlert,a=s.history,i=s.setUser;(t=n.state,F()({method:"POST",url:N+"/sign-up/",data:{credentials:{email:t.email,password:t.password,password_confirmation:t.passwordConfirmation}}})).then((function(){return D(n.state)})).then((function(e){return i(e.data.user)})).then((function(){return r({heading:"Sign Up Success",message:"Succesfully registered! You've been signed in as well.",variant:"success"})})).then((function(){return a.push("/")})).catch((function(e){n.setState({email:"",password:"",passwordConfirmation:""}),r({heading:"Sign Up Failed with error: "+e.message,message:"Registration failed. Email may be taken, or passwords don't match.",variant:"danger"})}))},n.state={email:"",password:"",passwordConfirmation:""},n}return Object(u.a)(s,[{key:"render",value:function(){var e=this.state,t=e.email,s=e.password,n=e.passwordConfirmation;return Object(p.jsx)("div",{className:"row",children:Object(p.jsxs)("div",{className:"col-sm-10 col-md-8 mx-auto mt-5",children:[Object(p.jsx)("h3",{children:"Sign Up"}),Object(p.jsxs)(B.a,{onSubmit:this.onSignUp,children:[Object(p.jsxs)(B.a.Group,{controlId:"email",children:[Object(p.jsx)(B.a.Label,{children:"Email address"}),Object(p.jsx)(B.a.Control,{required:!0,type:"email",name:"email",value:t,placeholder:"Enter email",onChange:this.handleChange})]}),Object(p.jsxs)(B.a.Group,{controlId:"password",children:[Object(p.jsx)(B.a.Label,{children:"Password"}),Object(p.jsx)(B.a.Control,{required:!0,name:"password",value:s,type:"password",placeholder:"Password",onChange:this.handleChange})]}),Object(p.jsxs)(B.a.Group,{controlId:"passwordConfirmation",children:[Object(p.jsx)(B.a.Label,{children:"Password Confirmation"}),Object(p.jsx)(B.a.Control,{required:!0,name:"passwordConfirmation",value:n,type:"password",placeholder:"Confirm Password",onChange:this.handleChange})]}),Object(p.jsx)(L.a,{variant:"primary",type:"submit",children:"Submit"})]})]})})}}]),s}(n.Component),U=Object(h.f)(T),_=function(e){Object(l.a)(s,e);var t=Object(d.a)(s);function s(e){var n;return Object(o.a)(this,s),(n=t.call(this,e)).handleChange=function(e){return n.setState(Object(A.a)({},e.target.name,e.target.value))},n.onSignIn=function(e){e.preventDefault();var t=n.props,s=t.msgAlert,r=t.history,a=t.setUser;D(n.state).then((function(e){return a(e.data.user)})).then((function(){return s({heading:"Sign In Success",message:"Welcome!",variant:"success"})})).then((function(){return r.push("/")})).catch((function(e){n.setState({email:"",password:""}),s({heading:"Sign In Failed with error: "+e.message,message:"Failed to sign in. Check your email and password and try again.",variant:"danger"})}))},n.state={email:"",password:""},n}return Object(u.a)(s,[{key:"render",value:function(){var e=this.state,t=e.email,s=e.password;return Object(p.jsx)("div",{className:"row",children:Object(p.jsxs)("div",{className:"col-sm-10 col-md-8 mx-auto mt-5",children:[Object(p.jsx)("h3",{children:"Sign In"}),Object(p.jsxs)(B.a,{onSubmit:this.onSignIn,children:[Object(p.jsxs)(B.a.Group,{controlId:"email",children:[Object(p.jsx)(B.a.Label,{children:"Email address"}),Object(p.jsx)(B.a.Control,{required:!0,type:"email",name:"email",value:t,placeholder:"Enter email",onChange:this.handleChange})]}),Object(p.jsxs)(B.a.Group,{controlId:"password",children:[Object(p.jsx)(B.a.Label,{children:"Password"}),Object(p.jsx)(B.a.Control,{required:!0,name:"password",value:s,type:"password",placeholder:"Password",onChange:this.handleChange})]}),Object(p.jsx)(L.a,{variant:"primary",type:"submit",children:"Submit"})]})]})})}}]),s}(n.Component),G=Object(h.f)(_),J=function(e){Object(l.a)(s,e);var t=Object(d.a)(s);function s(){return Object(o.a)(this,s),t.apply(this,arguments)}return Object(u.a)(s,[{key:"componentDidMount",value:function(){var e=this.props,t=e.msgAlert,s=e.history,n=e.clearUser;(function(e){return F()({url:N+"/sign-out/",method:"DELETE",headers:{Authorization:"Bearer ".concat(e.token)}})})(e.user).finally((function(){return t({heading:"Signed Out Successfully",message:"Come back soon!",variant:"success"})})).finally((function(){return s.push("/")})).finally((function(){return n()}))}},{key:"render",value:function(){return""}}]),s}(n.Component),z=Object(h.f)(J),R=function(e){Object(l.a)(s,e);var t=Object(d.a)(s);function s(e){var n;return Object(o.a)(this,s),(n=t.call(this,e)).handleChange=function(e){return n.setState(Object(A.a)({},e.target.name,e.target.value))},n.onChangePassword=function(e){e.preventDefault();var t=n.props,s=t.msgAlert,r=t.history,a=t.user;(function(e,t){return F()({url:N+"/change-password/",method:"PATCH",headers:{Authorization:"Bearer ".concat(t.token)},data:{passwords:{old:e.oldPassword,new:e.newPassword}}})})(n.state,a).then((function(){return s({heading:"Change Password Success",message:"Password changed successfully!",variant:"success"})})).then((function(){return r.push("/")})).catch((function(e){n.setState({oldPassword:"",newPassword:""}),s({heading:"Change Password Failed with error: "+e.message,message:"Failed to change passwords. Check your old password and try again.",variant:"danger"})}))},n.state={oldPassword:"",newPassword:""},n}return Object(u.a)(s,[{key:"render",value:function(){var e=this.state,t=e.oldPassword,s=e.newPassword;return Object(p.jsx)("div",{className:"row",children:Object(p.jsxs)("div",{className:"col-sm-10 col-md-8 mx-auto mt-5",children:[Object(p.jsx)("h3",{children:"Change Password"}),Object(p.jsxs)(B.a,{onSubmit:this.onChangePassword,children:[Object(p.jsxs)(B.a.Group,{controlId:"oldPassword",children:[Object(p.jsx)(B.a.Label,{children:"Old password"}),Object(p.jsx)(B.a.Control,{required:!0,name:"oldPassword",value:t,type:"password",placeholder:"Old Password",onChange:this.handleChange})]}),Object(p.jsxs)(B.a.Group,{controlId:"newPassword",children:[Object(p.jsx)(B.a.Label,{children:"New Password"}),Object(p.jsx)(B.a.Control,{required:!0,name:"newPassword",value:s,type:"password",placeholder:"New Password",onChange:this.handleChange})]}),Object(p.jsx)(L.a,{variant:"primary",type:"submit",children:"Submit"})]})]})})}}]),s}(n.Component),X=Object(h.f)(R),M=function(e){return F()({method:"GET",url:N+"/surveys/",headers:{Authorization:"Bearer ".concat(e.token)}})},H=function(e,t){return F()({method:"GET",url:N+"/surveys/"+t,headers:{Authorization:"Bearer ".concat(e.token)}})},Q=function(e){Object(l.a)(s,e);var t=Object(d.a)(s);function s(e){var n;return Object(o.a)(this,s),(n=t.call(this,e)).handleChange=function(e){return n.setState(Object(A.a)({},e.target.name,e.target.value))},n.onCreateSurvey=function(e){e.preventDefault();var t=n.props,s=t.msgAlert,r=t.user,a=t.history;(function(e,t){return F()({method:"POST",url:N+"/surveys/",headers:{Authorization:"Bearer ".concat(t.token)},data:{survey:{title:e.title,text:e.text}}})})(n.state,r).then((function(e){return n.setState({id:e.data.survey._id})})).then((function(){return s({heading:"Create Survey Success",message:"success",variant:"success"})})).then((function(){return a.push("/surveys/"+n.state.id)})).catch((function(e){s({heading:"Error",message:"Error:"+e.message,variant:"danger"})}))},n.state={title:"",text:"",id:""},n}return Object(u.a)(s,[{key:"render",value:function(){var e=this.state,t=e.title,s=e.text;return Object(p.jsx)("div",{className:"row",children:Object(p.jsxs)("div",{className:"col-sm-10 col-md-8 mx-auto mt-5",children:[Object(p.jsx)("h3",{children:"Create Survey"}),Object(p.jsxs)(B.a,{onSubmit:this.onCreateSurvey,children:[Object(p.jsxs)(B.a.Group,{controlId:"title",children:[Object(p.jsx)(B.a.Label,{children:"Title"}),Object(p.jsx)(B.a.Control,{required:!0,type:"title",name:"title",value:t,placeholder:"Enter title",onChange:this.handleChange})]}),Object(p.jsxs)(B.a.Group,{controlId:"text",children:[Object(p.jsx)(B.a.Label,{children:"Description"}),Object(p.jsx)(B.a.Control,{name:"text",value:s,type:"text",placeholder:"Enter description",onChange:this.handleChange})]}),Object(p.jsx)(L.a,{variant:"primary",type:"submit",children:"Submit"})]})]})})}}]),s}(n.Component),Y=Object(h.f)(Q),V=function(e){Object(l.a)(s,e);var t=Object(d.a)(s);function s(e){var n;return Object(o.a)(this,s),(n=t.call(this,e)).viewAllSurveys=function(){var e=n.props,t=e.msgAlert,s=e.user;M(s).then((function(e){return e.data.surveys.filter((function(e){return e.owner!==n.props.user._id}))})).then((function(e){return n.setState({surveys:e,show:!0,owned:!1})})).then((function(){return t({heading:"Index Survey Success",message:"success",variant:"success"})})).catch((function(e){t({heading:"Error",message:"Error:"+e.message,variant:"danger"})}))},n.viewYourSurveys=function(){var e=n.props,t=e.msgAlert,s=e.user;M(s).then((function(e){return e.data.surveys.filter((function(e){return e.owner===n.props.user._id}))})).then((function(e){return n.setState({surveys:e,show:!0,owned:!0})})).then((function(){return t({heading:"Index Survey Success",message:"success",variant:"success"})})).catch((function(e){t({heading:"Error",message:"Error:"+e.message,variant:"danger"})}))},n.goBack=function(){n.setState({show:!1})},n.state={surveys:null,show:!1,owned:!1},n}return Object(u.a)(s,[{key:"render",value:function(){var e,t=this.state,s=t.surveys,n=t.show;return e=t.owned?Object(p.jsx)("h3",{children:"Your Surveys"}):Object(p.jsx)("h3",{children:"All Surveys"}),n?null===s?"Loading...":Object(p.jsx)("div",{className:"row",children:Object(p.jsxs)("div",{className:"col-sm-10 col-md-8 mx-auto mt-5",children:[e,s.map((function(e){return Object(p.jsx)("li",{id:e._id,children:Object(p.jsx)(S.b,{to:"/surveys/"+e._id,children:e.title})},e._id)})),Object(p.jsx)(L.a,{variant:"primary",onClick:this.goBack,children:"Back"})]})}):Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(L.a,{variant:"primary",onClick:this.viewAllSurveys,children:"View All Surveys"})," ",Object(p.jsx)("br",{}),Object(p.jsx)(L.a,{onClick:this.viewYourSurveys,children:"View Your Surveys"})]})}}]),s}(n.Component),W=Object(h.f)(V),K=function(e){Object(l.a)(s,e);var t=Object(d.a)(s);function s(e){var n;return Object(o.a)(this,s),(n=t.call(this,e)).deleteClick=function(){var e=n.props.match.params.id,t=n.props,s=t.user,r=t.history;(function(e,t){return F()({method:"DELETE",url:N+"/surveys/"+t,headers:{Authorization:"Bearer ".concat(e.token)}})})(s,e).then((function(){return r.push("/surveys")})).catch(console.error)},n.updateClick=function(){n.props.history.push("/surveys/"+n.props.match.params.id+"/update")},n.takeSurvey=function(){n.setState({takeSurvey:!0})},n.seeResponses=function(){n.setState({seeResponses:!0})},n.state={survey:null,takeSurvey:!1,seeResponses:!1},n}return Object(u.a)(s,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id,s=this.props.user;H(s,t).then((function(t){return e.setState({survey:t.data.survey})})).catch(console.error)}},{key:"render",value:function(){var e,t,s=this.state,n=s.survey,r=s.takeSurvey,a=s.seeResponses,i=this.props.user;return null===n?"Loading...":(e=0===n.questions.length?"Need some questions":n.questions.map((function(e){return Object(p.jsx)("li",{children:e.title},e._id)})),t=n.owner===i._id?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(L.a,{variant:"primary",onClick:this.deleteClick,children:"Delete Survey"}),Object(p.jsx)(L.a,{variant:"primary",onClick:this.updateClick,children:"Update Survey"}),Object(p.jsx)(L.a,{variant:"primary",onClick:this.seeResponses,children:"See Responses"})]}):Object(p.jsx)(L.a,{variant:"primary",onClick:this.takeSurvey,children:"Take Survey"}),r?Object(p.jsx)(h.a,{to:"/surveys/"+n._id+"/take-survey"}):a?Object(p.jsx)(h.a,{to:"/surveys/"+n._id+"/responses"}):""===n.text?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("h4",{children:"Survey"}),Object(p.jsx)("h5",{children:this.state.survey.title}),Object(p.jsx)("h5",{children:"All the questions"}),Object(p.jsx)("ul",{children:e}),t]}):Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("h4",{children:"Survey"}),Object(p.jsx)("h5",{children:this.state.survey.title}),Object(p.jsxs)("p",{children:["About: ",this.state.survey.text]}),Object(p.jsx)("h5",{children:"All the questions"}),Object(p.jsx)("ul",{children:e}),t]}))}}]),s}(n.Component),Z=Object(h.f)(K),$=function(e){Object(l.a)(s,e);var t=Object(d.a)(s);function s(e){var n;return Object(o.a)(this,s),(n=t.call(this,e)).handleChange=function(e){return n.setState(Object(A.a)({},e.target.name,e.target.value))},n.onUpdateSurvey=function(e){e.preventDefault();var t=n.props.match.params.id,s=n.props,r=s.user,a=s.history;(function(e,t,s){return F()({method:"PATCH",url:N+"/surveys/"+s,headers:{Authorization:"Bearer ".concat(t.token)},data:{survey:{title:e.title,text:e.text}}})})(n.state,r,t).then((function(){return a.push("/surveys/"+n.props.match.params.id)}))},n.test=function(){n.setState({questions:!0})},n.state={title:"",text:"",questions:!1},n}return Object(u.a)(s,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id,s=this.props.user;H(s,t).then((function(t){return e.setState({title:t.data.survey.title,text:t.data.survey.text})})).catch(console.error)}},{key:"render",value:function(){return""===this.state.title?"Loading...":this.state.questions?Object(p.jsx)(h.a,{to:"/surveys/"+this.props.match.params.id+"/update/questions"}):Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("div",{className:"row",children:Object(p.jsxs)("div",{className:"col-sm-10 col-md-8 mx-auto mt-5",children:[Object(p.jsx)("h3",{children:"Update Survey"}),Object(p.jsxs)(B.a,{onSubmit:this.onUpdateSurvey,children:[Object(p.jsxs)(B.a.Group,{controlId:"title",children:[Object(p.jsx)(B.a.Label,{children:"Title"}),Object(p.jsx)(B.a.Control,{required:!0,type:"title",name:"title",value:this.state.title,placeholder:"Enter title",onChange:this.handleChange})]}),Object(p.jsxs)(B.a.Group,{controlId:"text",children:[Object(p.jsx)(B.a.Label,{children:"Text"}),Object(p.jsx)(B.a.Control,{name:"text",value:this.state.text,type:"text",placeholder:"text",onChange:this.handleChange})]}),Object(p.jsx)(L.a,{variant:"primary",type:"submit",children:"Submit"})]})]})}),Object(p.jsx)(L.a,{variant:"primary",onClick:this.test,children:"Questions"})]})}}]),s}(n.Component),ee=Object(h.f)($),te=function(e){Object(l.a)(s,e);var t=Object(d.a)(s);function s(e){var n;return Object(o.a)(this,s),(n=t.call(this,e)).onShowSurvey=function(){var e=n.props.match.params.id,t=n.props.user;H(t,e).then((function(e){return n.setState({questions:e.data.survey.questions})})).then((function(){for(var e=1;e<n.state.questions.length+1;e++){var t,s=n.state.questions[e-1].title,r=n.state.questions[e-1]._id;void 0===r&&(r=""),void 0===s&&(s=""),n.setState((t={},Object(A.a)(t,"question"+e,s),Object(A.a)(t,"question"+e+"key",r),t))}})).catch(console.error)},n.handleChange=function(e){return n.setState(Object(A.a)({},e.target.name,e.target.value))},n.onSubmit=function(e){e.preventDefault();for(var t=function(e){var t=n.props,s=t.user,r=t.history,a=n.state["question"+e],i=n.state["question"+e+"key"];void 0===i?function(e,t,s,n){return F()({method:"POST",url:N+"/questions/",headers:{Authorization:"Bearer ".concat(n.token)},data:{question:{title:e,content:t,surveyId:s,owner:n._id}}})}(a,"short answer",n.state.sId,s).then((function(){return n.onShowSurvey()})).then((function(){return n.setJSX()})).then((function(){return r.push("/surveys/"+n.state.sId)})).catch((function(){return console.error})):function(e,t,s,n,r){return F()({method:"PATCH",url:N+"/questions/"+n,headers:{Authorization:"Bearer ".concat(r.token)},data:{question:{title:e,content:t,surveyId:s,owner:r._id}}})}(a,"short answer",n.state.sId,i,s).then((function(){return n.onShowSurvey()})).then((function(){return n.setJSX()})).then((function(){return r.push("/surveys/"+n.state.sId)})).catch((function(){return console.error}))},s=1;s<n.state.amt+1;s++)t(s)},n.deleteDynamic=function(e){var t=e.target.getAttribute("data-num"),s=e.target.getAttribute("data-id"),r=n.state,a=r.sId,i=r.amt,c=n.props.user;if(null===s||""===s){for(var o=t;o<i;o++){var u=parseInt(o)+1;void 0===n.state["question"+u]&&n.setState(Object(A.a)({},"question"+o,"")),n.setState(Object(A.a)({},"question"+o,n.state["question"+u]))}return n.setState(Object(A.a)({amt:n.state.amt-1},"question"+i,null)),void n.setJSX()}(function(e,t,s){return F()({method:"DELETE",url:N+"/questions/"+t,headers:{Authorization:"Bearer ".concat(s.token)},data:{question:{surveyId:e}}})})(a,s,c).then((function(){return n.onShowSurvey()})).then((function(){for(var e,s=t;s<i;s++){var r,a=parseInt(s)+1;void 0===n.state["question"+a]&&n.setState(Object(A.a)({},"question"+s,"")),n.setState((r={},Object(A.a)(r,"question"+s,n.state["question"+a]),Object(A.a)(r,"question"+s+"key",n.state["question"+a+"key"]),r))}n.setState((e={amt:n.state.amt-1},Object(A.a)(e,"question"+i,void 0),Object(A.a)(e,"question"+i+"key",void 0),e))})).then((function(){return n.setJSX()})).catch((function(){return console.error}))},n.addQuestion=function(){n.setState({amt:n.state.amt+1}),n.setJSX()},n.setJSX=function(){for(var e=[],t=1;t<n.state.amt+1;t++)e.push(Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)(B.a.Group,{controlId:n.state["question"+t+"key"],children:[Object(p.jsx)(B.a.Label,{children:"Question"}),Object(p.jsx)(B.a.Control,{required:!0,maxLength:"300",type:"question",value:n.state["question"+t],name:"question"+t,placeholder:"Enter question",onChange:n.handleChange})]}),Object(p.jsxs)(B.a.Group,{controlId:"answer"+t,children:[Object(p.jsx)(B.a.Label,{children:"Description"}),Object(p.jsx)(B.a.Control,{disabled:!0,name:"text",type:"text",placeholder:"Short Answer Question"})]}),Object(p.jsx)(L.a,{variant:"primary",type:"button",onClick:n.deleteDynamic,"data-num":t,"data-id":n.state["question"+t+"key"],children:"Delete"})]}));return e},n.state={title:"",text:"",sId:"",amt:0,questions:[]},n}return Object(u.a)(s,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id,s=this.props.user;H(s,t).then((function(t){return e.setState({sId:t.data.survey._id,title:t.data.survey.title,text:t.data.survey.text,questions:t.data.survey.questions})})).then((function(){return e.setState({amt:e.state.questions.length})})).then((function(){for(var t=1;t<e.state.amt+1;t++){var s,n=e.state.questions[t-1].title,r=e.state.questions[t-1]._id;void 0===r&&(r=""),void 0===n&&(n=""),e.setState((s={},Object(A.a)(s,"question"+t,n),Object(A.a)(s,"question"+t+"key",r),s))}})).catch(console.error)}},{key:"render",value:function(){var e=this.setJSX();return""===this.state.title?"Loading ...":Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("h4",{children:this.state.title}),Object(p.jsxs)("p",{children:["Description: ",this.state.text]}),Object(p.jsx)(L.a,{variant:"primary",onClick:this.addQuestion,children:"Add Question"}),Object(p.jsxs)(B.a,{onSubmit:this.onSubmit,children:[e,Object(p.jsx)(L.a,{variant:"primary",type:"submit",children:"Submit"})]})]})}}]),s}(n.Component),se=Object(h.f)(te),ne=function(e,t,s,n){return F()({method:"POST",url:N+"/responses",headers:{Authorization:"Bearer ".concat(n.token)},data:{response:{content:e,question:t,surveyId:s,owner:n._id}}})},re=function(e){Object(l.a)(s,e);var t=Object(d.a)(s);function s(e){var n;return Object(o.a)(this,s),(n=t.call(this,e)).handleChange=function(e){return n.setState(Object(A.a)({},e.target.name,e.target.value))},n.onSubmit=function(e){e.preventDefault();for(var t=n.props.user,s=1;s<n.state.amt+1;s++){var r=n.state["answer"+s],a=n.state["question"+s];ne(r,a,n.state.sId,t).then((function(){return n.setState({completed:!0})})).catch((function(){return console.error}))}},n.allSurveys=function(){n.props.history.push("/surveys/")},n.setJSX=function(){for(var e=[],t=1;t<n.state.amt+1;t++)e.push(Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)(B.a.Group,{controlId:n.state["question"+t+"key"],children:[Object(p.jsx)(B.a.Label,{children:n.state["question"+t]}),Object(p.jsx)(B.a.Control,{required:!0,maxLength:"300",type:"question",value:n.state["answer"+t],name:"answer"+t,placeholder:"Short Answer",onChange:n.handleChange})]})}));return e},n.state={title:"",text:"",sId:"",amt:0,questions:[],responses:[],taken:!1,completed:!1},n}return Object(u.a)(s,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id,s=this.props.user;H(s,t).then((function(t){return e.setState({sId:t.data.survey._id,title:t.data.survey.title,text:t.data.survey.text,questions:t.data.survey.questions,responses:t.data.survey.responses})})).then((function(){return e.setState({amt:e.state.questions.length})})).then((function(){for(var t=e.state.responses,n=0;n<t.length;n++)if(t[n].owner===s._id)return void e.setState({taken:!0});for(var r=1;r<e.state.amt+1;r++){var a,i=e.state.questions[r-1].title,c=e.state.questions[r-1]._id;void 0===c&&(c=""),void 0===i&&(i=""),e.setState((a={},Object(A.a)(a,"question"+r,i),Object(A.a)(a,"question"+r+"key",c),Object(A.a)(a,"answer"+r,""),a))}})).catch(console.error)}},{key:"render",value:function(){var e=this.setJSX(),t=this.state,s=t.title,n=t.questions,r=t.completed,a=t.taken;return""===s?"Loading ...":0===n.length?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("p",{children:"This survey has no questions. Please return to all surveys"}),Object(p.jsx)(L.a,{variant:"primary",onClick:this.allSurveys,children:"Return to Surveys"})]}):a?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("p",{children:["It seems you've already taken this survey.",Object(p.jsx)("br",{}),"Please return to all surveys."]}),Object(p.jsx)(L.a,{variant:"primary",onClick:this.allSurveys,children:"Return to Surveys"})]}):r?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("p",{children:"Thank you for taking this survey!"}),Object(p.jsx)(L.a,{variant:"primary",onClick:this.allSurveys,children:"Return to Surveys"})]}):Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("h4",{children:this.state.title}),Object(p.jsxs)("p",{children:["Description: ",this.state.text]}),Object(p.jsxs)(B.a,{onSubmit:this.onSubmit,children:[e,Object(p.jsx)(L.a,{variant:"primary",type:"submit",children:"Submit"})]})]})}}]),s}(n.Component),ae=Object(h.f)(re),ie=function(e){Object(l.a)(s,e);var t=Object(d.a)(s);function s(e){var n;return Object(o.a)(this,s),(n=t.call(this,e)).componentDidMount=function(){var e=n.props.match.params.id,t=n.props.user;H(t,e).then((function(e){return n.setState({survey:e.data.survey,responses:e.data.survey.responses})})).then((function(){for(var e=n.state.responses,t=[],s=1,r=function(r){var a=e[r].owner;t.includes(a)||(n.setState(Object(A.a)({},"response"+s,[])),n.setState(Object(A.a)({},"response"+s,e.filter((function(e){return e.owner===a})))),s++,t.push(a),n.setState({tracker:s}))},a=0;a<e.length;a++)r(a)})).catch(console.error)},n.setJSX=function(){for(var e=[],t=n.state.tracker,s=1;s<t;s++)e.push(Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("h4",{children:["Response ",s]}),Object(p.jsx)("ul",{children:n.state["response"+s].map((function(e){return Object(p.jsxs)("li",{children:[e.question,": ",e.content]},e._id)}))})]}));return e},n.goBack=function(){n.props.history.push("/surveys/"+n.props.match.params.id)},n.state={survey:null,responses:[],tracker:0},n}return Object(u.a)(s,[{key:"render",value:function(){if(null===this.state.survey)return"loading...";if(void 0===this.state.response1)return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("p",{children:"No responses"}),Object(p.jsx)(L.a,{variant:"primary",onClick:this.goBack,children:"Back"})]});var e=this.setJSX();return Object(p.jsxs)(p.Fragment,{children:[e,Object(p.jsx)(L.a,{variant:"primary",onClick:this.goBack,children:"Back"})]})}}]),s}(n.Component),ce=Object(h.f)(ie),oe=function(e){Object(l.a)(s,e);var t=Object(d.a)(s);function s(e){var n;return Object(o.a)(this,s),(n=t.call(this,e)).setUser=function(e){return n.setState({user:e})},n.clearUser=function(){return n.setState({user:null})},n.deleteAlert=function(e){n.setState((function(t){return{msgAlerts:t.msgAlerts.filter((function(t){return t.id!==e}))}}))},n.msgAlert=function(e){var t=e.heading,s=e.message,r=e.variant,a=Object(j.a)();n.setState((function(e){return{msgAlerts:[].concat(Object(c.a)(e.msgAlerts),[{heading:t,message:s,variant:r,id:a}])}}))},n.state={user:null,msgAlerts:[]},n}return Object(u.a)(s,[{key:"render",value:function(){var e=this,t=this.state,s=t.msgAlerts,r=t.user;return Object(p.jsxs)(n.Fragment,{children:[Object(p.jsx)(q,{user:r}),s.map((function(t){return Object(p.jsx)(f,{heading:t.heading,variant:t.variant,message:t.message,id:t.id,deleteAlert:e.deleteAlert},t.id)})),Object(p.jsxs)("main",{className:"container",children:[Object(p.jsx)(h.b,{path:"/sign-up",render:function(){return Object(p.jsx)(U,{msgAlert:e.msgAlert,setUser:e.setUser})}}),Object(p.jsx)(h.b,{path:"/sign-in",render:function(){return Object(p.jsx)(G,{msgAlert:e.msgAlert,setUser:e.setUser})}}),Object(p.jsx)(O,{user:r,path:"/sign-out",render:function(){return Object(p.jsx)(z,{msgAlert:e.msgAlert,clearUser:e.clearUser,user:r})}}),Object(p.jsx)(O,{user:r,path:"/change-password",render:function(){return Object(p.jsx)(X,{msgAlert:e.msgAlert,user:r})}}),Object(p.jsx)(O,{exact:!0,user:r,path:"/new-survey",render:function(){return Object(p.jsx)(Y,{msgAlert:e.msgAlert,user:r})}}),Object(p.jsx)(O,{exact:!0,user:r,path:"/surveys",render:function(){return Object(p.jsx)(W,{msgAlert:e.msgAlert,user:r})}}),Object(p.jsx)(O,{exact:!0,user:r,path:"/surveys/:id",render:function(){return Object(p.jsx)(Z,{msgAlert:e.msgAlert,user:r})}}),Object(p.jsx)(O,{exact:!0,user:r,path:"/surveys/:id/update",render:function(){return Object(p.jsx)(ee,{msgAlert:e.msgAlert,user:r})}}),Object(p.jsx)(O,{exact:!0,user:r,path:"/surveys/:id/update/questions",render:function(){return Object(p.jsx)(se,{msgAlert:e.msgAlert,user:r})}}),Object(p.jsx)(O,{exact:!0,user:r,path:"/surveys/:id/take-survey",render:function(){return Object(p.jsx)(ae,{msgAlert:e.msgAlert,user:r})}}),Object(p.jsx)(O,{exact:!0,user:r,path:"/surveys/:id/responses",render:function(){return Object(p.jsx)(ce,{msgAlert:e.msgAlert,user:r})}})]})]})}}]),s}(n.Component),ue=Object(p.jsx)(S.a,{basename:"/SurveyBite-Client",children:Object(p.jsx)(oe,{})});i.a.render(ue,document.getElementById("root"))},77:function(e,t,s){},86:function(e,t,s){}},[[107,1,2]]]);
//# sourceMappingURL=main.f0e7ce7b.chunk.js.map