(this["webpackJsonpSurveyBite-Client"]=this["webpackJsonpSurveyBite-Client"]||[]).push([[0],{107:function(e,t,n){"use strict";n.r(t);var s=n(1),r=n.n(s),a=n(31),o=n.n(a),i=(n(77),n(54)),c=n(8),u=n(9),l=n(11),d=n(10),h=n(14),j=n(110),b=n(2),m=n(3),v=n(0),p=["user","component","render"],O=function(e){var t=e.user,n=e.component,s=e.render,r=Object(m.a)(e,p);return t&&s?Object(v.jsx)(h.b,Object(b.a)(Object(b.a)({},r),{},{render:s})):Object(v.jsx)(h.b,Object(b.a)(Object(b.a)({},r),{},{render:function(e){return t?Object(v.jsx)(n,Object(b.a)({},e)):Object(v.jsx)(h.a,{to:"/"})}}))},f=n(60),g=(n(86),function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var s;return Object(c.a)(this,n),(s=t.call(this,e)).handleClose=function(){return s.setState({show:!1})},s.state={show:!0},s.timeoutId=null,s}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.timeoutId=setTimeout(this.handleClose,5e3)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timeoutId)}},{key:"render",value:function(){var e=this.props,t=e.variant,n=e.heading,s=e.message,r=e.deleteAlert,a=e.id;return this.state.show||setTimeout((function(){r(a)}),300),Object(v.jsx)(f.a,{dismissible:!0,show:this.state.show,variant:t,onClose:this.handleClose,children:Object(v.jsxs)("div",{className:"container",children:[Object(v.jsx)(f.a.Heading,{children:n}),Object(v.jsx)("p",{className:"alert-body",children:s})]})})}}]),n}(r.a.Component)),x=n(72),y=n(44),S=n(13),w=Object(v.jsxs)(s.Fragment,{children:[Object(v.jsx)(S.c,{to:"/change-password",className:"nav-link",children:"Change Password"}),Object(v.jsx)(S.c,{to:"/new-survey",className:"nav-link",children:"Create Survey"}),Object(v.jsx)(S.c,{to:"/surveys",className:"nav-link",children:"Surveys"}),Object(v.jsx)(S.c,{to:"/sign-out",className:"nav-link",children:"Sign Out"}),Object(v.jsx)(S.c,{to:"/test",className:"nav-link",children:"Test"})]}),C=Object(v.jsxs)(s.Fragment,{children:[Object(v.jsx)(S.c,{to:"/sign-up",className:"nav-link",children:"Sign Up"}),Object(v.jsx)(S.c,{to:"/sign-in",className:"nav-link",children:"Sign In"})]}),k=Object(v.jsx)(s.Fragment,{children:Object(v.jsx)(S.c,{exact:!0,to:"/",className:"nav-link",children:"Home"})}),q=function(e){var t=e.user;return Object(v.jsxs)(y.a,{bg:"primary",variant:"dark",expand:"md",children:[Object(v.jsx)(y.a.Brand,{children:Object(v.jsx)(S.b,{to:"/",style:{color:"#FFF",textDecoration:"none"},children:"Survey Bite"})}),Object(v.jsx)(y.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(v.jsx)(y.a.Collapse,{id:"basic-navbar-nav",children:Object(v.jsxs)(x.a,{className:"ml-auto",children:[t&&Object(v.jsxs)("span",{className:"navbar-text mr-2",children:["Welcome, ",t.email]}),k,t?w:C]})})]})},A=n(4),I="https://floating-lowlands-79433.herokuapp.com",P="http://localhost:4741",N="localhost"===window.location.hostname?P:I,D=n(18),E=n.n(D),F=function(e){return E()({url:N+"/sign-in/",method:"POST",data:{credentials:{email:e.email,password:e.password}}})},L=n(6),T=n(20),U=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var s;return Object(c.a)(this,n),(s=t.call(this,e)).handleChange=function(e){return s.setState(Object(A.a)({},e.target.name,e.target.value))},s.onSignUp=function(e){e.preventDefault();var t,n=s.props,r=n.msgAlert,a=n.history,o=n.setUser;(t=s.state,E()({method:"POST",url:N+"/sign-up/",data:{credentials:{email:t.email,password:t.password,password_confirmation:t.passwordConfirmation}}})).then((function(){return F(s.state)})).then((function(e){return o(e.data.user)})).then((function(){return r({heading:"Sign Up Success",message:"Succesfully registered! You've been signed in as well.",variant:"success"})})).then((function(){return a.push("/")})).catch((function(e){s.setState({email:"",password:"",passwordConfirmation:""}),r({heading:"Sign Up Failed with error: "+e.message,message:"Registration failed. Email may be taken, or passwords don't match.",variant:"danger"})}))},s.state={email:"",password:"",passwordConfirmation:""},s}return Object(u.a)(n,[{key:"render",value:function(){var e=this.state,t=e.email,n=e.password,s=e.passwordConfirmation;return Object(v.jsx)("div",{className:"row",children:Object(v.jsxs)("div",{className:"col-sm-10 col-md-8 mx-auto mt-5",children:[Object(v.jsx)("h3",{children:"Sign Up"}),Object(v.jsxs)(L.a,{onSubmit:this.onSignUp,children:[Object(v.jsxs)(L.a.Group,{controlId:"email",children:[Object(v.jsx)(L.a.Label,{children:"Email address"}),Object(v.jsx)(L.a.Control,{required:!0,type:"email",name:"email",value:t,placeholder:"Enter email",onChange:this.handleChange})]}),Object(v.jsxs)(L.a.Group,{controlId:"password",children:[Object(v.jsx)(L.a.Label,{children:"Password"}),Object(v.jsx)(L.a.Control,{required:!0,name:"password",value:n,type:"password",placeholder:"Password",onChange:this.handleChange})]}),Object(v.jsxs)(L.a.Group,{controlId:"passwordConfirmation",children:[Object(v.jsx)(L.a.Label,{children:"Password Confirmation"}),Object(v.jsx)(L.a.Control,{required:!0,name:"passwordConfirmation",value:s,type:"password",placeholder:"Confirm Password",onChange:this.handleChange})]}),Object(v.jsx)(T.a,{variant:"primary",type:"submit",children:"Submit"})]})]})})}}]),n}(s.Component),B=Object(h.f)(U),_=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var s;return Object(c.a)(this,n),(s=t.call(this,e)).handleChange=function(e){return s.setState(Object(A.a)({},e.target.name,e.target.value))},s.onSignIn=function(e){e.preventDefault();var t=s.props,n=t.msgAlert,r=t.history,a=t.setUser;F(s.state).then((function(e){return a(e.data.user)})).then((function(){return n({heading:"Sign In Success",message:"Welcome!",variant:"success"})})).then((function(){return r.push("/")})).catch((function(e){s.setState({email:"",password:""}),n({heading:"Sign In Failed with error: "+e.message,message:"Failed to sign in. Check your email and password and try again.",variant:"danger"})}))},s.state={email:"",password:""},s}return Object(u.a)(n,[{key:"render",value:function(){var e=this.state,t=e.email,n=e.password;return Object(v.jsx)("div",{className:"row",children:Object(v.jsxs)("div",{className:"col-sm-10 col-md-8 mx-auto mt-5",children:[Object(v.jsx)("h3",{children:"Sign In"}),Object(v.jsxs)(L.a,{onSubmit:this.onSignIn,children:[Object(v.jsxs)(L.a.Group,{controlId:"email",children:[Object(v.jsx)(L.a.Label,{children:"Email address"}),Object(v.jsx)(L.a.Control,{required:!0,type:"email",name:"email",value:t,placeholder:"Enter email",onChange:this.handleChange})]}),Object(v.jsxs)(L.a.Group,{controlId:"password",children:[Object(v.jsx)(L.a.Label,{children:"Password"}),Object(v.jsx)(L.a.Control,{required:!0,name:"password",value:n,type:"password",placeholder:"Password",onChange:this.handleChange})]}),Object(v.jsx)(T.a,{variant:"primary",type:"submit",children:"Submit"})]})]})})}}]),n}(s.Component),G=Object(h.f)(_),z=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.msgAlert,n=e.history,s=e.clearUser;(function(e){return E()({url:N+"/sign-out/",method:"DELETE",headers:{Authorization:"Bearer ".concat(e.token)}})})(e.user).finally((function(){return t({heading:"Signed Out Successfully",message:"Come back soon!",variant:"success"})})).finally((function(){return n.push("/")})).finally((function(){return s()}))}},{key:"render",value:function(){return""}}]),n}(s.Component),J=Object(h.f)(z),X=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var s;return Object(c.a)(this,n),(s=t.call(this,e)).handleChange=function(e){return s.setState(Object(A.a)({},e.target.name,e.target.value))},s.onChangePassword=function(e){e.preventDefault();var t=s.props,n=t.msgAlert,r=t.history,a=t.user;(function(e,t){return E()({url:N+"/change-password/",method:"PATCH",headers:{Authorization:"Bearer ".concat(t.token)},data:{passwords:{old:e.oldPassword,new:e.newPassword}}})})(s.state,a).then((function(){return n({heading:"Change Password Success",message:"Password changed successfully!",variant:"success"})})).then((function(){return r.push("/")})).catch((function(e){s.setState({oldPassword:"",newPassword:""}),n({heading:"Change Password Failed with error: "+e.message,message:"Failed to change passwords. Check your old password and try again.",variant:"danger"})}))},s.state={oldPassword:"",newPassword:""},s}return Object(u.a)(n,[{key:"render",value:function(){var e=this.state,t=e.oldPassword,n=e.newPassword;return Object(v.jsx)("div",{className:"row",children:Object(v.jsxs)("div",{className:"col-sm-10 col-md-8 mx-auto mt-5",children:[Object(v.jsx)("h3",{children:"Change Password"}),Object(v.jsxs)(L.a,{onSubmit:this.onChangePassword,children:[Object(v.jsxs)(L.a.Group,{controlId:"oldPassword",children:[Object(v.jsx)(L.a.Label,{children:"Old password"}),Object(v.jsx)(L.a.Control,{required:!0,name:"oldPassword",value:t,type:"password",placeholder:"Old Password",onChange:this.handleChange})]}),Object(v.jsxs)(L.a.Group,{controlId:"newPassword",children:[Object(v.jsx)(L.a.Label,{children:"New Password"}),Object(v.jsx)(L.a.Control,{required:!0,name:"newPassword",value:n,type:"password",placeholder:"New Password",onChange:this.handleChange})]}),Object(v.jsx)(T.a,{variant:"primary",type:"submit",children:"Submit"})]})]})})}}]),n}(s.Component),M=Object(h.f)(X),Q=function(e){return E()({method:"GET",url:N+"/surveys/",headers:{Authorization:"Bearer ".concat(e.token)}})},H=function(e,t){return E()({method:"GET",url:N+"/surveys/"+t,headers:{Authorization:"Bearer ".concat(e.token)}})},R=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var s;return Object(c.a)(this,n),(s=t.call(this,e)).handleChange=function(e){return s.setState(Object(A.a)({},e.target.name,e.target.value))},s.onCreateSurvey=function(e){e.preventDefault();var t=s.props,n=t.msgAlert,r=t.user,a=t.history;(function(e,t){return E()({method:"POST",url:N+"/surveys/",headers:{Authorization:"Bearer ".concat(t.token)},data:{survey:{title:e.title,text:e.text}}})})(s.state,r).then((function(e){return s.setState({id:e.data.survey._id})})).then((function(){return n({heading:"Create Survey Success",message:"success",variant:"success"})})).then((function(){return a.push("/surveys/"+s.state.id)})).catch((function(e){n({heading:"Error",message:"Error:"+e.message,variant:"danger"})}))},s.state={title:"",text:"",id:""},s}return Object(u.a)(n,[{key:"render",value:function(){var e=this.state,t=e.title,n=e.text;return Object(v.jsx)("div",{className:"row",children:Object(v.jsxs)("div",{className:"col-sm-10 col-md-8 mx-auto mt-5",children:[Object(v.jsx)("h3",{children:"Create Survey"}),Object(v.jsxs)(L.a,{onSubmit:this.onCreateSurvey,children:[Object(v.jsxs)(L.a.Group,{controlId:"title",children:[Object(v.jsx)(L.a.Label,{children:"Title"}),Object(v.jsx)(L.a.Control,{required:!0,type:"title",name:"title",value:t,placeholder:"Enter title",onChange:this.handleChange})]}),Object(v.jsxs)(L.a.Group,{controlId:"text",children:[Object(v.jsx)(L.a.Label,{children:"Description"}),Object(v.jsx)(L.a.Control,{name:"text",value:n,type:"text",placeholder:"Enter description",onChange:this.handleChange})]}),Object(v.jsx)(T.a,{variant:"primary",type:"submit",children:"Submit"})]})]})})}}]),n}(s.Component),Y=Object(h.f)(R),W=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var s;return Object(c.a)(this,n),(s=t.call(this,e)).viewAllSurveys=function(){var e=s.props,t=e.msgAlert,n=e.user;Q(n).then((function(e){return e.data.surveys.filter((function(e){return e.owner!==s.props.user._id}))})).then((function(e){return s.setState({surveys:e,show:!0,owned:!1})})).then((function(){return t({heading:"Index Survey Success",message:"success",variant:"success"})})).catch((function(e){t({heading:"Error",message:"Error:"+e.message,variant:"danger"})}))},s.viewYourSurveys=function(){var e=s.props,t=e.msgAlert,n=e.user;Q(n).then((function(e){return e.data.surveys.filter((function(e){return e.owner===s.props.user._id}))})).then((function(e){return s.setState({surveys:e,show:!0,owned:!0})})).then((function(){return t({heading:"Index Survey Success",message:"success",variant:"success"})})).catch((function(e){t({heading:"Error",message:"Error:"+e.message,variant:"danger"})}))},s.goBack=function(){s.setState({show:!1})},s.state={surveys:null,show:!1,owned:!1},s}return Object(u.a)(n,[{key:"render",value:function(){var e,t=this.state,n=t.surveys,s=t.show;return e=t.owned?Object(v.jsx)("h3",{children:"Your Surveys"}):Object(v.jsx)("h3",{children:"All Surveys"}),s?null===n?"Loading...":Object(v.jsx)("div",{className:"row",children:Object(v.jsxs)("div",{className:"col-sm-10 col-md-8 mx-auto mt-5",children:[e,n.map((function(e){return Object(v.jsx)("li",{id:e._id,children:Object(v.jsx)(S.b,{to:"/surveys/"+e._id,children:e.title})},e._id)})),Object(v.jsx)("button",{onClick:this.goBack,children:"Back"})]})}):Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("button",{onClick:this.viewAllSurveys,children:"View All Surveys"})," ",Object(v.jsx)("br",{}),Object(v.jsx)("button",{onClick:this.viewYourSurveys,children:"View Your Surveys"})]})}}]),n}(s.Component),V=Object(h.f)(W),K=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var s;return Object(c.a)(this,n),(s=t.call(this,e)).deleteClick=function(){var e=s.props.match.params.id,t=s.props,n=t.user,r=t.history;(function(e,t){return E()({method:"DELETE",url:N+"/surveys/"+t,headers:{Authorization:"Bearer ".concat(e.token)}})})(n,e).then((function(){return r.push("/surveys")})).catch(console.error)},s.updateClick=function(){s.props.history.push("/surveys/"+s.props.match.params.id+"/update")},s.takeSurvey=function(){s.setState({takeSurvey:!0})},s.state={survey:null,takeSurvey:!1},s}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id,n=this.props.user;H(n,t).then((function(t){return e.setState({survey:t.data.survey})})).then((function(){console.log(e.state.survey.owner),console.log(n._id)})).catch(console.error)}},{key:"render",value:function(){var e,t,n=this.state,s=n.survey,r=n.takeSurvey,a=this.props.user;return console.log(s),null===s?"Loading...":(e=0===s.questions.length?"Need some questions":s.questions.map((function(e){return Object(v.jsx)("li",{children:e.title},e._id)})),t=s.owner===a._id?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("button",{onClick:this.deleteClick,children:"Delete Survey"}),Object(v.jsx)("button",{onClick:this.updateClick,children:"Update Survey"}),Object(v.jsx)("button",{children:"See Responses"})]}):Object(v.jsx)("button",{onClick:this.takeSurvey,children:"Take Survey"}),r?Object(v.jsx)(h.a,{to:"/surveys/"+s._id+"/take-survey"}):""===s.text?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("h4",{children:"Survey"}),Object(v.jsx)("h5",{children:this.state.survey.title}),Object(v.jsx)("h5",{children:"All the questions"}),Object(v.jsx)("ul",{children:e}),t]}):Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("h4",{children:"Survey"}),Object(v.jsx)("h5",{children:this.state.survey.title}),Object(v.jsxs)("p",{children:["Description: ",this.state.survey.text]}),Object(v.jsx)("h5",{children:"All the questions"}),Object(v.jsx)("ul",{children:e}),t]}))}}]),n}(s.Component),Z=Object(h.f)(K),$=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var s;return Object(c.a)(this,n),(s=t.call(this,e)).handleChange=function(e){return s.setState(Object(A.a)({},e.target.name,e.target.value))},s.onUpdateSurvey=function(e){e.preventDefault();var t=s.props.match.params.id,n=s.props,r=n.user,a=n.history;(function(e,t,n){return E()({method:"PATCH",url:N+"/surveys/"+n,headers:{Authorization:"Bearer ".concat(t.token)},data:{survey:{title:e.title,text:e.text}}})})(s.state,r,t).then((function(){return a.push("/surveys/"+s.props.match.params.id)}))},s.test=function(){s.setState({questions:!0})},s.state={title:"",text:"",questions:!1},s}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id,n=this.props.user;H(n,t).then((function(t){return e.setState({title:t.data.survey.title,text:t.data.survey.text})})).catch(console.error)}},{key:"render",value:function(){return""===this.state.title?"Loading...":this.state.questions?Object(v.jsx)(h.a,{to:"/surveys/"+this.props.match.params.id+"/update/questions"}):Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{className:"row",children:Object(v.jsxs)("div",{className:"col-sm-10 col-md-8 mx-auto mt-5",children:[Object(v.jsx)("h3",{children:"Update Survey"}),Object(v.jsxs)(L.a,{onSubmit:this.onUpdateSurvey,children:[Object(v.jsxs)(L.a.Group,{controlId:"title",children:[Object(v.jsx)(L.a.Label,{children:"Title"}),Object(v.jsx)(L.a.Control,{required:!0,type:"title",name:"title",value:this.state.title,placeholder:"Enter title",onChange:this.handleChange})]}),Object(v.jsxs)(L.a.Group,{controlId:"text",children:[Object(v.jsx)(L.a.Label,{children:"Text"}),Object(v.jsx)(L.a.Control,{name:"text",value:this.state.text,type:"text",placeholder:"text",onChange:this.handleChange})]}),Object(v.jsx)(T.a,{variant:"primary",type:"submit",children:"Submit"})]})]})}),Object(v.jsx)("button",{onClick:this.test,children:"Questions"})]})}}]),n}(s.Component),ee=Object(h.f)($),te=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var s;return Object(c.a)(this,n),(s=t.call(this,e)).onShowSurvey=function(){var e=s.props.match.params.id,t=s.props.user;H(t,e).then((function(e){return s.setState({questions:e.data.survey.questions})})).then((function(){for(var e=1;e<s.state.questions.length+1;e++){var t,n=s.state.questions[e-1].title,r=s.state.questions[e-1]._id;void 0===r&&(r=""),void 0===n&&(n=""),s.setState((t={},Object(A.a)(t,"question"+e,n),Object(A.a)(t,"question"+e+"key",r),t))}})).catch(console.error)},s.handleChange=function(e){return s.setState(Object(A.a)({},e.target.name,e.target.value))},s.onSubmit=function(e){e.preventDefault();for(var t=function(e){var t=s.props,n=t.user,r=t.history,a=s.state["question"+e],o=s.state["question"+e+"key"];void 0===o?function(e,t,n,s){return E()({method:"POST",url:N+"/questions/",headers:{Authorization:"Bearer ".concat(s.token)},data:{question:{title:e,content:t,surveyId:n,owner:s._id}}})}(a,"short answer",s.state.sId,n).then((function(e){return console.log(e)})).then((function(){return s.onShowSurvey()})).then((function(){return s.setJSX()})).then((function(){return r.push("/surveys/"+s.state.sId)})).catch((function(){return console.log("fail")})):function(e,t,n,s,r){return E()({method:"PATCH",url:N+"/questions/"+s,headers:{Authorization:"Bearer ".concat(r.token)},data:{question:{title:e,content:t,surveyId:n,owner:r._id}}})}(a,"short answer",s.state.sId,o,n).then((function(e){return console.log(e)})).then((function(){return s.onShowSurvey()})).then((function(){return s.setJSX()})).then((function(){return r.push("/surveys/"+s.state.sId)})).catch((function(){return console.error}))},n=1;n<s.state.amt+1;n++)t(n)},s.deleteDynamic=function(e){var t=e.target.getAttribute("data-num"),n=e.target.getAttribute("data-id"),r=s.state,a=r.sId,o=r.amt,i=s.props.user;if(null===n||""===n){for(var c=t;c<o;c++){var u=parseInt(c)+1;void 0===s.state["question"+u]&&s.setState(Object(A.a)({},"question"+c,"")),s.setState(Object(A.a)({},"question"+c,s.state["question"+u])),console.log(u+" "+s.state["question"+u])}return s.setState(Object(A.a)({amt:s.state.amt-1},"question"+o,null)),void s.setJSX()}(function(e,t,n){return E()({method:"DELETE",url:N+"/questions/"+t,headers:{Authorization:"Bearer ".concat(n.token)},data:{question:{surveyId:e}}})})(a,n,i).then((function(){return s.onShowSurvey()})).then((function(){for(var e,n=t;n<o;n++){var r,a=parseInt(n)+1;void 0===s.state["question"+a]&&s.setState(Object(A.a)({},"question"+n,"")),s.setState((r={},Object(A.a)(r,"question"+n,s.state["question"+a]),Object(A.a)(r,"question"+n+"key",s.state["question"+a+"key"]),r)),console.log(a+" "+s.state["question"+a+"key"])}s.setState((e={amt:s.state.amt-1},Object(A.a)(e,"question"+o,void 0),Object(A.a)(e,"question"+o+"key",void 0),e))})).then((function(){return s.setJSX()})).catch((function(){return console.error}))},s.addQuestion=function(){s.setState({amt:s.state.amt+1}),s.setJSX()},s.setJSX=function(){for(var e=[],t=1;t<s.state.amt+1;t++)e.push(Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)(L.a.Group,{controlId:s.state["question"+t+"key"],children:[Object(v.jsx)(L.a.Label,{children:"Question"}),Object(v.jsx)(L.a.Control,{required:!0,maxLength:"300",type:"question",value:s.state["question"+t],name:"question"+t,placeholder:"Enter question",onChange:s.handleChange})]}),Object(v.jsxs)(L.a.Group,{controlId:"answer"+t,children:[Object(v.jsx)(L.a.Label,{children:"Description"}),Object(v.jsx)(L.a.Control,{disabled:!0,name:"text",type:"text",placeholder:"Short Answer Question"})]}),Object(v.jsx)("button",{type:"button",onClick:s.deleteDynamic,"data-num":t,"data-id":s.state["question"+t+"key"],children:"Delete"})]}));return e},s.state={title:"",text:"",sId:"",amt:0,questions:[]},s}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id,n=this.props.user;H(n,t).then((function(t){return e.setState({sId:t.data.survey._id,title:t.data.survey.title,text:t.data.survey.text,questions:t.data.survey.questions})})).then((function(){return e.setState({amt:e.state.questions.length})})).then((function(){for(var t=1;t<e.state.amt+1;t++){var n,s=e.state.questions[t-1].title,r=e.state.questions[t-1]._id;void 0===r&&(r=""),void 0===s&&(s=""),e.setState((n={},Object(A.a)(n,"question"+t,s),Object(A.a)(n,"question"+t+"key",r),n))}})).catch(console.error)}},{key:"render",value:function(){var e=this.setJSX();return""===this.state.title?"Loading ...":Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("h4",{children:this.state.title}),Object(v.jsxs)("p",{children:["Description: ",this.state.text]}),Object(v.jsx)(T.a,{variant:"primary",onClick:this.addQuestion,children:"Add Question"}),Object(v.jsxs)(L.a,{onSubmit:this.onSubmit,children:[e,Object(v.jsx)(T.a,{variant:"primary",type:"submit",children:"Submit"})]})]})}}]),n}(s.Component),ne=Object(h.f)(te),se=function(e,t,n){return E()({method:"POST",url:N+"/responses",headers:{Authorization:"Bearer ".concat(n.token)},data:{response:{content:e,surveyId:t,owner:n._id}}})},re=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var s;return Object(c.a)(this,n),(s=t.call(this,e)).handleChange=function(e){return s.setState(Object(A.a)({},e.target.name,e.target.value))},s.onSubmit=function(e){e.preventDefault();for(var t=1;t<s.state.amt+1;t++){var n=s.props.user,r=s.state["answer"+t];se(r,s.state.sId,n).then((function(e){return console.log(e)})).then((function(){return s.setState({completed:!0})})).catch((function(){return console.log("fail")}))}},s.allSurveys=function(){s.props.history.push("/surveys/")},s.setJSX=function(){for(var e=[],t=1;t<s.state.amt+1;t++)e.push(Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)(L.a.Group,{controlId:s.state["question"+t+"key"],children:[Object(v.jsx)(L.a.Label,{children:s.state["question"+t]}),Object(v.jsx)(L.a.Control,{required:!0,maxLength:"300",type:"question",value:s.state["answer"+t],name:"answer"+t,placeholder:"Short Answer",onChange:s.handleChange})]})}));return e},s.state={title:"",text:"",sId:"",amt:0,questions:[],responses:[],taken:!1,completed:!1},s}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id,n=this.props.user;H(n,t).then((function(t){return e.setState({sId:t.data.survey._id,title:t.data.survey.title,text:t.data.survey.text,questions:t.data.survey.questions,responses:t.data.survey.responses})})).then((function(){return e.setState({amt:e.state.questions.length})})).then((function(){for(var t=e.state.responses,s=0;s<t.length;s++)if(t[s].owner===n._id)return void e.setState({taken:!0});for(var r=1;r<e.state.amt+1;r++){var a,o=e.state.questions[r-1].title,i=e.state.questions[r-1]._id;void 0===i&&(i=""),void 0===o&&(o=""),e.setState((a={},Object(A.a)(a,"question"+r,o),Object(A.a)(a,"question"+r+"key",i),Object(A.a)(a,"answer"+r,""),a))}})).catch(console.error)}},{key:"render",value:function(){var e=this.setJSX(),t=this.state,n=t.title,s=t.questions,r=t.completed,a=t.taken;return""===n?"Loading ...":0===s.length?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("p",{children:"This survey has no questions. Please return to all surveys"}),Object(v.jsx)("button",{onClick:this.allSurveys,children:"Return to Surveys"})]}):a?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("p",{children:["It seems you've already taken this survey.",Object(v.jsx)("br",{}),"Please return to all surveys."]}),Object(v.jsx)("button",{onClick:this.allSurveys,children:"Return to Surveys"})]}):r?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("p",{children:"Thank you for taking this survey!"}),Object(v.jsx)("button",{onClick:this.allSurveys,children:"Return to Surveys"})]}):Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("h4",{children:this.state.title}),Object(v.jsxs)("p",{children:["Description: ",this.state.text]}),Object(v.jsxs)(L.a,{onSubmit:this.onSubmit,children:[e,Object(v.jsx)(T.a,{variant:"primary",type:"submit",children:"Submit"})]})]})}}]),n}(s.Component),ae=Object(h.f)(re),oe=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var s;return Object(c.a)(this,n),(s=t.call(this,e)).componentDidMount=function(){var e=s.props.user;H(e,"62701ac832095a25707f3156").then((function(e){return s.setState({survey:e.data.survey,responses:e.data.survey.responses})})).then((function(){for(var e=s.state.responses,t=function(t){var n=e[t].owner,r=1,a=[];console.log(t),console.log(a.includes(n)),console.log(a),console.log(n),a.includes(n)||(s.setState(Object(A.a)({},"response"+r,[])),s.setState(Object(A.a)({},"response"+r,e.filter((function(e){return e.owner===n})))),r++,a.push(n))},n=0;n<e.length;n++)t(n)})).catch(console.error)},s.state={survey:null,responses:[]},s}return Object(u.a)(n,[{key:"render",value:function(){return console.log(this.state),Object(v.jsx)(v.Fragment,{})}}]),n}(s.Component),ie=Object(h.f)(oe),ce=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var s;return Object(c.a)(this,n),(s=t.call(this,e)).setUser=function(e){return s.setState({user:e})},s.clearUser=function(){return s.setState({user:null})},s.deleteAlert=function(e){s.setState((function(t){return{msgAlerts:t.msgAlerts.filter((function(t){return t.id!==e}))}}))},s.msgAlert=function(e){var t=e.heading,n=e.message,r=e.variant,a=Object(j.a)();s.setState((function(e){return{msgAlerts:[].concat(Object(i.a)(e.msgAlerts),[{heading:t,message:n,variant:r,id:a}])}}))},s.state={user:null,msgAlerts:[]},s}return Object(u.a)(n,[{key:"render",value:function(){var e=this,t=this.state,n=t.msgAlerts,r=t.user;return Object(v.jsxs)(s.Fragment,{children:[Object(v.jsx)(q,{user:r}),n.map((function(t){return Object(v.jsx)(g,{heading:t.heading,variant:t.variant,message:t.message,id:t.id,deleteAlert:e.deleteAlert},t.id)})),Object(v.jsxs)("main",{className:"container",children:[Object(v.jsx)(h.b,{path:"/sign-up",render:function(){return Object(v.jsx)(B,{msgAlert:e.msgAlert,setUser:e.setUser})}}),Object(v.jsx)(h.b,{path:"/sign-in",render:function(){return Object(v.jsx)(G,{msgAlert:e.msgAlert,setUser:e.setUser})}}),Object(v.jsx)(O,{user:r,path:"/sign-out",render:function(){return Object(v.jsx)(J,{msgAlert:e.msgAlert,clearUser:e.clearUser,user:r})}}),Object(v.jsx)(O,{user:r,path:"/change-password",render:function(){return Object(v.jsx)(M,{msgAlert:e.msgAlert,user:r})}}),Object(v.jsx)(O,{exact:!0,user:r,path:"/new-survey",render:function(){return Object(v.jsx)(Y,{msgAlert:e.msgAlert,user:r})}}),Object(v.jsx)(O,{exact:!0,user:r,path:"/surveys",render:function(){return Object(v.jsx)(V,{msgAlert:e.msgAlert,user:r})}}),Object(v.jsx)(O,{exact:!0,user:r,path:"/surveys/:id",render:function(){return Object(v.jsx)(Z,{msgAlert:e.msgAlert,user:r})}}),Object(v.jsx)(O,{exact:!0,user:r,path:"/surveys/:id/update",render:function(){return Object(v.jsx)(ee,{msgAlert:e.msgAlert,user:r})}}),Object(v.jsx)(O,{exact:!0,user:r,path:"/surveys/:id/update/questions",render:function(){return Object(v.jsx)(ne,{msgAlert:e.msgAlert,user:r})}}),Object(v.jsx)(O,{exact:!0,user:r,path:"/surveys/:id/take-survey",render:function(){return Object(v.jsx)(ae,{msgAlert:e.msgAlert,user:r})}}),Object(v.jsx)(O,{exact:!0,user:r,path:"/test",render:function(){return Object(v.jsx)(ie,{msgAlert:e.msgAlert,user:r})}})]})]})}}]),n}(s.Component),ue=Object(v.jsx)(S.a,{basename:"/SurveyBite-Client",children:Object(v.jsx)(ce,{})});o.a.render(ue,document.getElementById("root"))},77:function(e,t,n){},86:function(e,t,n){}},[[107,1,2]]]);
//# sourceMappingURL=main.6ee2896e.chunk.js.map